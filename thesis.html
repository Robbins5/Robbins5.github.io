<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thesis | The AI-Ready Audit</title>
  <meta name="description" content="The foundational thesis for internal audit modernization during enterprise transition: from sampling-era assurance to population signals, monitoring-driven oversight, and defensible evidence in system-driven environments." />
  <link rel="stylesheet" href="style.css" />

  <!-- Hard-hide both views until selection (prevents flash of content) -->
  <style>
    #view-web, #view-article { display: none; }
  </style>
</head>

<body class="page-thesis">
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <a class="brand-link" href="index.html">
          <div class="brand-title">The AI-Ready Audit</div>
          <div class="brand-tagline">Architecting Internal Audit for Intelligent Systems</div>
        </a>
      </div>

      <nav class="nav" aria-label="Primary">
        <a class="nav-link" href="index.html">Home</a>
        <a class="nav-link nav-cta" href="thesis.html">Thesis</a>
        <a class="nav-link" href="executive-oversight.html">Executive Oversight</a>
        <a class="nav-link" href="audit-leadership.html">Audit Leadership</a>
        <a class="nav-link" href="resources.html">Resources</a>
        <a class="nav-link" href="about.html">About</a>
      </nav>
    </div>
  </header>

  <main>
<!-- PREMIUM READING GATE -->
<section class="format-gate" id="reading-gate">
  <div class="container">
    <div class="format-gate-shell">
      <div class="format-gate-header">
        <p class="format-kicker">Welcome</p>
        <h1 class="format-title">Choose your reading experience</h1>
        <p class="format-subtitle">
          This research is available in two formats to support different learning styles and personal reading preferences.
          Pick what feels most natural — you can switch anytime.
        </p>
      </div>

      <div class="format-grid" role="group" aria-label="Reading format">
        <button type="button" class="format-card" id="btn-web" data-view="web">
          <div class="format-card-top">
            <div class="format-icon" aria-hidden="true">
              <!-- simple inline svg: grid -->
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none">
                <path d="M4 4h7v7H4V4Zm9 0h7v7h-7V4ZM4 13h7v7H4v-7Zm9 0h7v7h-7v-7Z" stroke="currentColor" stroke-width="1.8"/>
              </svg>
            </div>
            <div class="format-card-title-wrap">
              <div class="format-card-title">Structured Web Experience</div>
              <div class="format-card-tag">Best for scanning</div>
            </div>
          </div>

          <div class="format-card-body">
            Sectioned layout with visual hierarchy — easy to skim, jump, and revisit key points.
          </div>

          <div class="format-card-foot">
            <span class="format-cta">Open structured view</span>
            <span class="format-arrow" aria-hidden="true">→</span>
          </div>
        </button>

        <button type="button" class="format-card" id="btn-article" data-view="article">
          <div class="format-card-top">
            <div class="format-icon" aria-hidden="true">
              <!-- simple inline svg: document -->
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none">
                <path d="M7 3h7l3 3v15H7V3Z" stroke="currentColor" stroke-width="1.8"/>
                <path d="M9 11h6M9 15h6M9 7h3" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
              </svg>
            </div>
            <div class="format-card-title-wrap">
              <div class="format-card-title">Traditional Thesis Article</div>
              <div class="format-card-tag">Best for deep reading</div>
            </div>
          </div>

          <div class="format-card-body">
            Continuous long-form narrative (your <em>my-sixth-post</em> thesis article) in a single flow.
          </div>

          <div class="format-card-foot">
            <span class="format-cta">Open article view</span>
            <span class="format-arrow" aria-hidden="true">→</span>
          </div>
        </button>
      </div>

      <div class="format-gate-note">
        Tip: If you’re short on time, start with the structured view. If you’re reading for depth, choose the article.
      </div>
    </div>
  </div>
</section>
    <!-- ✅ GATE: ONLY THING VISIBLE ON LOAD -->
    <section class="reading-gate" id="reading-gate">
      <div class="container">
        <div class="reading-gate-card">
          <p class="reading-gate-kicker">Welcome</p>
          <h1 class="reading-gate-title">How Would You Like to Read This?</h1>
          <p class="reading-gate-subtitle">
            This research is available in two formats to support different learning styles and personal reading preferences.
            Choose the experience that works best for you.
          </p>

            <div class="reading-toggle" role="group" aria-label="Reading format">
      <button type="button" class="reading-pill reading-pill-web" id="btn-web" data-view="web">
        <span class="reading-pill-top">
          <span class="reading-pill-icon" aria-hidden="true">▦</span>
          <span class="reading-pill-title">Structured Web Experience</span>
          <span class="reading-pill-chip">Best for scanning</span>
        </span>
        <span class="reading-pill-sub">Broken into sections for scanning and exploration.</span>
        <span class="reading-pill-foot">
          <span class="reading-pill-cta">Open structured view</span>
          <span class="reading-pill-arrow" aria-hidden="true">→</span>
        </span>
      </button>
    
      <button type="button" class="reading-pill reading-pill-article" id="btn-article" data-view="article">
        <span class="reading-pill-top">
          <span class="reading-pill-icon" aria-hidden="true">≡</span>
          <span class="reading-pill-title">Traditional Thesis Article</span>
          <span class="reading-pill-chip">Best for deep reading</span>
        </span>
        <span class="reading-pill-sub">Presented as a complete, continuous research paper.</span>
        <span class="reading-pill-foot">
          <span class="reading-pill-cta">Open article view</span>
          <span class="reading-pill-arrow" aria-hidden="true">→</span>
        </span>
      </button>
    </div>

          <p class="reading-gate-note">You can switch formats anytime.</p>
        </div>
      </div>
    </section>

    <!-- ========================= -->
    <!-- VIEW 1: WEB VERSION (HIDDEN UNTIL CLICK) -->
    <!-- ========================= -->
    <div id="view-web" class="thesis-view">
      <!-- HERO -->
      <section class="exec-hero">
        <div class="container">
          <div class="thesis-hero">

            <div class="thesis-hero-left">
              <p class="exec-kicker">The Thesis</p>
              <h1 class="exec-title">Redefining internal audit during system change, scale, and rising expectations.</h1>

              <p class="exec-subtitle" style="margin-bottom: 14px;">
                Enterprises are evolving (new systems, new workflows, new decision support), and audit standards are evolving with them.
                When transaction volume, automation depth, and system integration move, sampling-era assurance stops scaling.
                The operating model must shift toward population signals, monitoring-driven oversight, and defensible evidence in system-driven environments.
              </p>

              <p class="module-kicker" style="margin: 0 0 22px 0;">Estimated reading time: 5–7 minutes</p>

              <div class="exec-actions">
                <a class="btn btn-primary" href="#claim">Central claim</a>
                <a class="btn btn-secondary" href="#argument">Expanded argument</a>
                <a class="btn btn-secondary" href="#sources">Key sources</a>
              </div>

              <div class="cta-actions" style="margin-top: 14px;">
                <button type="button" class="btn btn-secondary" data-switch="article">Switch to Traditional Thesis Article</button>
              </div>
            </div>

            <div class="thesis-hero-right" aria-label="Thesis at a glance">
              <figure class="thesis-triad-visual reveal">
                <img
                  src="/triad.svg"
                  alt="Thesis triad: core claim, method shift, and anchor."
                  loading="lazy"
                />
              </figure>
            </div>

          </div>
        </div>
      </section>

      <!-- SECTION: CLAIM -->
      <section class="section section-alt" id="claim">
        <div class="container">
          <div class="section-head">
            <h2 class="section-title">Central claim</h2>
            <p class="section-subtitle">
              The enterprise environment changed. The constraint profile changed. Audit operating models must change proportionately.
            </p>
          </div>

          <div class="cta-panel">
            <div class="cta-copy">
              <h3 class="cta-title">Modern audit is signals, monitoring, and defensible evidence, built for interconnected systems.</h3>
              <p class="cta-text">
                Sampling remains useful, but it is no longer the default coverage method in many enterprise environments.
                The function must shift toward population signals, monitoring routines with thresholds and owners,
                and reconstructable evidence in system-driven workflows.
              </p>
            </div>
          </div>

        </div>
      </section>

      <!-- EXPANDED ARGUMENT -->
      <section class="section" id="argument">
        <div class="container">
          <div class="section-head">
            <h2 class="section-title">Foundational thesis argument and evidence</h2>
            <p class="section-subtitle">
              This foundational thesis argues that enterprise change and standards direction have moved the baseline for assurance from periodic sampling toward population signals, monitoring, and defensible evidence.
            </p>
          </div>

          <article class="path-card" style="cursor: default;">

            <!-- SECTION 1 -->
            <div class="module-kicker">Section 1</div>
            <h3 class="module-title" style="margin-top: 8px;">A structural shift is underway</h3>
            <div class="module-desc">
              <p>
                Internal audit is operating in an environment that has changed materially. Organizations are upgrading core systems.
                ERP platforms are evolving. Data architectures are shifting. Cloud-based applications are replacing legacy infrastructure.
                Specialized systems now support discrete components of end-to-end processes. Technology ecosystems are expanding across finance,
                operations, procurement, HR, logistics, and compliance. At the same time, businesses are scaling in transaction volume,
                automation depth, geographic complexity, digital integration, and decision velocity.
              </p>

              <p style="margin-top: 12px;">
                Overlaying these operational shifts is something equally significant: the audit profession itself is evolving, and executive
                expectations are rising with it. Professional guidance increasingly reinforces risk-based, forward-looking assurance, ongoing
                monitoring where feasible, data-enabled scalability, proportional oversight aligned with enterprise complexity, and reliable,
                defensible evidence.
              </p>

              <div class="thesis-note" style="margin-top: 14px;">
                <div class="module-kicker">Executive expectations</div>
                <div class="thesis-note-text" style="margin-top: 6px;">
                  Boards and executives increasingly expect audit to surface issues early enough to influence decisions, identify emerging risks rather than document historical outcomes,
                  scale coverage alongside enterprise growth, demonstrate visibility across interconnected systems, and provide insight proportionate to digital complexity.
                </div>
              </div>
            </div>

            <hr style="border: 0; border-top: 1px solid var(--border-soft); margin: 18px 0;" />

            <!-- SECTION 2 -->
            <div class="module-kicker">Section 2</div>
            <h3 class="module-title" style="margin-top: 8px;">The old model was rational for its time</h3>
            <div class="module-desc">
              <p>
                For decades, the traditional audit model was proportionate to technological constraint. Sampling was necessary because tools could not process full populations efficiently.
                System-by-system reviews were practical because cross-system analytics were limited. Data extraction was manual and often expensive. Continuous monitoring was aspirational but operationally unrealistic.
              </p>

              <p style="margin-top: 12px;">
                Periodic testing was responsible oversight within the limits of available infrastructure. The legacy model was rational. It was built around constraint.
                Those constraints no longer define the present environment.
              </p>
            </div>

            <hr style="border: 0; border-top: 1px solid var(--border-soft); margin: 18px 0;" />

            <!-- SECTION 3 -->
            <div class="module-kicker">Section 3</div>
            <h3 class="module-title" style="margin-top: 8px;">What has changed, and why it matters</h3>
            <div class="module-desc">
              <p>
                Modern enterprises no longer operate within contained systems. A transaction may originate in one platform, route through another, execute in a third, and reconcile in a fourth.
                Each system may operate correctly in isolation. Risk frequently emerges between them.
              </p>

              <div class="thesis-two-col" style="margin-top: 14px;">
                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Common themes</div>
                  <div class="module-title">Where intersection risk concentrates</div>
                  <div class="module-desc">
                    <ul style="margin-top: 10px; padding-left: 18px; line-height: 1.9;">
                      <li>Cross-system visibility gaps</li>
                      <li>Seam risk and handoff failure</li>
                      <li>Workarounds that persist post go-live</li>
                      <li>Evidence drift across platforms</li>
                      <li>Unclear ownership and escalation paths</li>
                    </ul>
                  </div>
                </div>

                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Examples</div>
                  <div class="module-title">Intersection risk patterns</div>
                  <div class="module-desc">
                    <ul style="margin-top: 10px; padding-left: 18px; line-height: 1.9;">
                      <li>Segregation of duties conflicts spanning multiple systems</li>
                      <li>Vendor master manipulation preceding suspicious payment activity</li>
                      <li>Expense reimbursement anomalies visible only when PCard and AP streams are combined</li>
                      <li>Revenue inconsistencies tied to operational platforms</li>
                      <li>Behavioral patterns that appear only in cross-system aggregation</li>
                    </ul>
                  </div>
                </div>
              </div>

              <p style="margin-top: 12px;">
                Auditing within silos while risk lives in system intersections creates blind spots. The feasibility constraint that once justified sampling has materially shifted.
                ERP-native monitoring modules enable continuous oversight of access conflicts, approval overrides, and control breakdowns. Analytics platforms enable full-population testing at scale.
                Anomaly detection platforms evaluate entire ledgers. Unified spend monitoring integrates AP, PCard, and reimbursement data to identify leakage, policy violations, and fraud risk.
              </p>

              <div class="thesis-note" style="margin-top: 14px;">
                <div class="module-kicker">Baseline shift</div>
                <div class="thesis-note-text" style="margin-top: 6px;">
                  In high-volume, digitally integrated industries, scalable monitoring and full-population analytics increasingly represent baseline capability. The question is no longer whether scalable oversight is possible.
                  The question is whether the function intends to operate at the level increasingly considered standard within the profession.
                </div>
              </div>
            </div>

            <hr style="border: 0; border-top: 1px solid var(--border-soft); margin: 18px 0;" />

            <!-- SECTION 4 -->
            <div class="module-kicker">Section 4</div>
            <h3 class="module-title" style="margin-top: 8px;">Indicators of operating model misalignment</h3>
            <div class="module-desc">
              <p>
                In organizations that have not yet evolved their operating model, early signals often appear subtly. Audit reports are technically accurate, yet findings repeat.
                Remediation plans are documented, yet systemic risk patterns persist. Leadership acknowledges issues, yet little strategic change follows.
              </p>

              <p style="margin-top: 12px;">
                Audit teams learn about system implementations and process changes during fieldwork rather than at design. New digital initiatives proceed without early audit inclusion.
                The function becomes reactive rather than embedded.
              </p>

              <div class="module-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr)); margin-top: 14px;">
                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Timing</div>
                  <div class="module-title">Inclusion shifts later</div>
                  <div class="module-desc">Audit enters after design, reducing influence and increasing rework.</div>
                </div>

                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Credibility</div>
                  <div class="module-title">Preparedness is questioned</div>
                  <div class="module-desc">Learning about change from auditees weakens embedded positioning.</div>
                </div>

                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Engagement</div>
                  <div class="module-title">Executive access contracts</div>
                  <div class="module-desc">Less time with executives narrows alignment and resourcing support.</div>
                </div>

                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Resourcing</div>
                  <div class="module-title">Backfills stall</div>
                  <div class="module-desc">Backfills require increasing justification; stability erodes.</div>
                </div>

                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Capacity</div>
                  <div class="module-title">Headcount contracts organically</div>
                  <div class="module-desc">Attrition accumulates while analytical capacity is most needed.</div>
                </div>

                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Outcome</div>
                  <div class="module-title">Influence narrows</div>
                  <div class="module-desc">Reports remain accurate, but arrive too late to drive change.</div>
                </div>
              </div>

              <div class="thesis-note" style="margin-top: 14px;">
                <div class="module-kicker">Accumulation</div>
                <div class="thesis-note-text" style="margin-top: 6px;">
                  No single moment marks the change. It accumulates.
                </div>
              </div>
            </div>

            <hr style="border: 0; border-top: 1px solid var(--border-soft); margin: 18px 0;" />

            <!-- SECTION 5 -->
            <div class="module-kicker">Section 5</div>
            <h3 class="module-title" style="margin-top: 8px;">What modern audit maturity looks like</h3>
            <div class="module-desc">
              <p>
                In digitally mature organizations, audit owns structured continuous monitoring review. Audit designs and operates population-level analytics,
                evaluates signals across interconnected systems, and establishes disciplined oversight routines that scale with enterprise complexity.
              </p>

              <p style="margin-top: 12px;">
                This is the inflection point between a function that reports after outcomes and a function positioned as a strategic partner.
                Modern audit does not wait for periodic engagements to discover breakdowns. It maintains ongoing visibility into risk patterns and exception signals,
                then engages business owners when thresholds are exceeded, risk elevates, or systemic inefficiencies surface.
              </p>

              <div class="module-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr)); margin-top: 14px;">
                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Method</div>
                  <div class="module-title">Population testing where it matters</div>
                  <div class="module-desc">
                    Sampling becomes targeted validation and exception follow-up.
                    Full-population analytics expand coverage proportionately to transaction volume, automation depth, and system integration.
                  </div>
                </div>

                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Assurance</div>
                  <div class="module-title">Continuous monitoring review owned by audit</div>
                  <div class="module-desc">
                    Audit operates monitoring routines, defines thresholds, sets review cadence, and maintains escalation and closure discipline.
                    Business owners remain accountable for process execution and remediation, while audit maintains independent oversight of signal integrity,
                    follow-up, and verified resolution.
                  </div>
                </div>

                <div class="module" style="cursor: default;">
                  <div class="module-kicker">Evidence</div>
                  <div class="module-title">Traceability that holds up</div>
                  <div class="module-desc">
                    Logs, approvals, lineage, and reproducible extraction logic support defensible assurance under governance, regulatory, and evidentiary standards.
                  </div>
                </div>
              </div>

              <p style="margin-top: 16px;">
                When monitoring signals surface elevated risk, audit engages business owners strategically, confirms root cause, aligns remediation timelines,
                and enforces structured follow-up until resolution is complete. Review cadence, escalation pathways, documentation standards, and closure criteria are defined.
                Closure is tracked and verified, not assumed.
              </p>

              <p style="margin-top: 12px;">
                This operating model expands audit’s impact across financial integrity, fraud detection, conflict of interest oversight, leakage prevention,
                operational efficiency, and Enterprise Risk Management alignment. It increases visibility early enough to influence decisions, not simply document outcomes.
              </p>
            </div>

            <hr style="border: 0; border-top: 1px solid var(--border-soft); margin: 18px 0;" />

            <!-- SECTION 6 -->
            <div class="module-kicker">Section 6</div>
            <h3 class="module-title" style="margin-top: 8px;">How strong leaders navigate the transition</h3>
            <div class="module-desc">
              <p>
                The response to structural evolution is not urgency. It is discipline. Mature programs stage capability intentionally: stabilize defensible evidence and access first,
                activate embedded monitoring next, expand cross-system visibility after ownership and data settle, and introduce targeted third-party platforms where differentiated value exists.
              </p>

              <p style="margin-top: 12px;">
                The order matters. Monitoring layered onto unstable access produces noise and credibility loss. Architecture must stabilize before automation expands.
              </p>

              <figure class="thesis-timeline-visual reveal" style="margin-top: 16px;">
                <img
                  src="/timeline.svg"
                  alt="Sequenced modernization timeline showing three stages: Stabilize evidence and access, Activate embedded capability, Expand cross-system monitoring."
                  loading="lazy"
                />
              </figure>

              <div class="thesis-note" style="margin-top: 14px;">
                <div class="module-kicker">Constraint reality</div>
                <div class="thesis-note-text" style="margin-top: 6px;">
                  During transition, architecture work and routine fieldwork cannot compete for the same bandwidth.
                  If modernization is treated as extra, it becomes intermittent, fragile, and slow.
                </div>
              </div>
            </div>

            <hr style="border: 0; border-top: 1px solid var(--border-soft); margin: 18px 0;" />

            <!-- CONCLUSION -->
            <div class="module-kicker">Conclusion</div>
            <h3 class="module-title" style="margin-top: 8px;">Architectural leadership defines the future</h3>
            <div class="module-desc">
              <p>
                One path leads toward scalable, forward-looking, strategically embedded oversight. The other preserves periodic testing, siloed reviews, and sampling where full-population testing is feasible.
                That legacy model can continue operating. Gradually, reports repeat. Inclusion shifts later. Influence narrows. Over time, the function becomes proportionally smaller relative to enterprise complexity.
                Irrelevance rarely arrives abruptly. It accumulates.
              </p>

              <p style="margin-top: 12px;">
                The enterprise has scaled. Standards have advanced. Executive expectations have risen. The operating model must evolve with them.
              </p>

              <div class="cta-actions" style="margin-top: 16px;">
                <a class="btn btn-primary" href="audit-leadership.html">How leaders build it</a>
                <a class="btn btn-secondary" href="executive-oversight.html">Executive translation</a>
              </div>
            </div>

          </article>
        </div>
      </section>

      <!-- KEY SOURCES -->
      <section class="section section-alt" id="sources">
        <div class="container">
          <div class="cta-panel">
            <div class="cta-copy">
              <h3 class="cta-title">Key sources</h3>
              <p class="cta-text">
                Standards and research anchors informing this thesis; the curated library is maintained in Resources.
              </p>
              <div style="margin-top: 10px; color: var(--muted); line-height: 1.75;">
                <ul style="padding-left: 18px;">
                  <li>IIA Global Internal Audit Standards (2024)</li>
                  <li>COSO Internal Control and ERM frameworks</li>
                  <li>Continuous controls monitoring and continuous assurance perspectives</li>
                  <li>Fraud analytics impact research (industry research bodies)</li>
                </ul>
              </div>
            </div>

            <div class="cta-actions">
              <a class="btn btn-primary" href="resources.html">Open resources</a>
              <button type="button" class="btn btn-secondary" data-switch="article">Switch format</button>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ========================= -->
    <!-- VIEW 2: TRADITIONAL ARTICLE (HIDDEN UNTIL CLICK) -->
    <!-- Uses iframe to “connect” to my-sixth-post.html -->
    <!-- ========================= -->
    <div id="view-article" class="thesis-view">
      <section class="section">
        <div class="container">
          <div class="article-shell">
            <div class="article-shell-head">
              <p class="exec-kicker">Traditional Thesis Article</p>
              <h1 class="exec-title" style="margin-top: 6px;">Redefining internal audit during system change, scale, and rising expectations.</h1>
              <p class="exec-subtitle" style="margin-top: 10px;">
                Presented as a complete, continuous research paper.
              </p>

              <div class="cta-actions" style="margin-top: 14px;">
                <button type="button" class="btn btn-secondary" data-switch="web">Switch to structured web view</button>
              </div>
            </div>

            <div class="article-embed">
              <iframe
                src="my-sixth-post.html"
                title="Traditional Thesis Article"
                loading="lazy"
              ></iframe>
            </div>

            <div class="cta-actions" style="margin-top: 14px;">
              <button type="button" class="btn btn-secondary" data-switch="web">Switch back to structured web view</button>
            </div>
          </div>
        </div>
      </section>
    </div>

  </main>

  <footer class="footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <div class="footer-brand">The AI-Ready Audit</div>
        <div class="footer-note">Thesis-backed operating model design for enterprise transition and intelligent systems.</div>
      </div>
      <div class="footer-right">
        <a class="footer-link" href="resources.html">Resources</a>
        <a class="footer-link" href="about.html">About</a>
      </div>
    </div>
    <div class="container footer-bottom">
      <p>&copy; 2026 Nicole Heflin</p>
    </div>
  </footer>

  <!-- Reveal animation (your original, unchanged) -->
  <script>
    (function () {
      const els = document.querySelectorAll('.reveal');
      if (!('IntersectionObserver' in window) || !els.length) {
        els.forEach(el => el.classList.add('is-visible'));
        return;
      }

      const io = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            io.unobserve(entry.target);
          }
        });
      }, { threshold: 0.15 });

      els.forEach(el => io.observe(el));
    })();
  </script>

  <!-- ✅ Gate + show/hide logic -->
  <script>
    (function () {
      const gate = document.getElementById('reading-gate');
      const viewWeb = document.getElementById('view-web');
      const viewArticle = document.getElementById('view-article');

      // Ensure both views are hidden no matter what (no flash)
      function hideAll() {
        viewWeb.style.display = 'none';
        viewArticle.style.display = 'none';
      }
      hideAll();

      function showView(which) {
        hideAll();

        if (which === 'web') {
          viewWeb.style.display = 'block';
        } else {
          viewArticle.style.display = 'block';
        }

        // Collapse/hide gate after selection
        gate.classList.add('is-collapsed');

        // Take them to the top of the content
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      // Initial gate selection buttons
      document.getElementById('btn-web').addEventListener('click', () => showView('web'));
      document.getElementById('btn-article').addEventListener('click', () => showView('article'));

      // Switchers inside the content (data-switch)
      document.addEventListener('click', (e) => {
        const btn = e.target.closest('[data-switch]');
        if (!btn) return;
        const which = btn.getAttribute('data-switch');
        if (which === 'web' || which === 'article') showView(which);
      });
    })();
  </script>

</body>
</html>
